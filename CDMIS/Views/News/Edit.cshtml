@model CDMIS.ViewModels.NewHealthEducationFile

@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewBag.Title = "健康教育资料管理";
}

<h2>编辑健康教育资料</h2>

<link href="@Url.Content("~/Content/bootstrap.min.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/bootstrap.min.js")" type="text/javascript"></script>
<script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("Edit", "News", FormMethod.Post, new { id = "Form1" }))
{
    @Html.HiddenFor(model=>model.news.FileName)
    @Html.HiddenFor(model => model.news.Id)
    @Html.HiddenFor(model => model.news.Path)
    <div class="editor-label">
        模块
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.selectedModuleId, Model.ModuleList, new { id = "ModuleDropDownList", @class = "form-control" })
    </div>

    <div class="editor-label">
        标题
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.news.Title, new { @class = "form-control" })
    </div>
    <div class="editor-label">
            编辑内容
    </div>  
    <div class="editor-field">
        @Html.TextAreaFor(m => m.news.htmlContent)
    </div>

    <p>
        <input type="submit" value="保存" class="btn btn-primary" />
    </p>

    
    <script type="text/javascript" src="../../ueditor/ueditor.config.js"></script>
    <script type="text/javascript" src="../../ueditor/ueditor.all.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#menu a").attr("id", ""); //Reset id's 
            $("#menu li:eq(4) a").attr("id", "current");
        });

        var editorOption = {
            initialFrameWidth: 850,
            initialFrameHeight: 400
        };
        var editor = new UE.getEditor("news_htmlContent", editorOption);
        //editor.render('htmlContent');

        //function createclick() {
        //alert(editor.getContent());
        $('#Form1').submit(function () {
            $('#news_htmlContent').val(editor.getContent());
        });
        //}
       
    </script>
}

<div>
    @Html.ActionLink("返回列表", "Index", new { Module = @Model.selectedModuleId })
</div>
